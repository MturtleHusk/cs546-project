<div>
    <h1>{{assignment.name}}</h1>
    <p>{{assignment.description}}</p>
    <span>{{assignment.dueDate}}</span>
    {{#if isTeacher}}
        <label>Grade:
            <input id="grade" type="number" pattern="[0-9|.]{3}" value="{{submission.grade}}">
        </label>
        <button id="update-grade" onclick="grader()">Update</button>
        {{#if submission.submission}}
            <div>Current Submission: <a href="/class/{{class.id}}/{{assignment.id}}/{{student}}">{{submission.submission.originalname}}</a></div>
        {{/if}}
        <div>Submission date: {{submission.submissionDate}}</div>
        <textarea id="teacher-comment">{{submission.teacherResponse}}</textarea>
        <button id="update-teacher-comment" onclick="comment()">Update</button>
        <script>
            const grade = $("#grade")[0];
            //const updateGrade = $("#update-grade");
            const teacherR = $("#teacher-comment")[0];
            //const updateComment = $("#update-teacher-comment");
            function grader (){
                let data = {grade: grade.value};
                if (isNaN(Number(data.grade)))
                    return;
                $.ajax({
                    type: 'PUT',
                    url: "/class/{{class.id}}/{{assignment.id}}/{{student}}/grade",
                    data: data,
                    dataType: "json",
                    contentType: "application/json"
                });
            }
            function comment() {
                let data = {comment: teacherR.innerHTML};
                if (data.comment === "")
                    return;
                $.ajax({
                    type: 'PUT',
                    url: "/class/{{class.id}}/{{assignment.id}}/{{student}}/comment",
                    data: data,
                    dataType: "json",
                    contentType: "application/json"
                });
            }
        </script>
    {{else}}
        {{#if submission}}
        <div>Current Submission: <a href="/class/{{class.id}}/{{assignment.id}}/{{student}}">{{submission}}</a></div>
        {{/if}}
    <form method="POST" action="/class/{{class.id}}/{{assignment.id}}" enctype="multipart/form-data">
        <label for="file-selector">Submit a file</label>
        <input type="file" name="submission" id="file-selector">
        <button type="submit">Submit</button>
    </form>
    {{/if}}
    <a href="/class/{{class.id}}">back</a>
</div>
